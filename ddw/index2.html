<!DOCTYPE html>
<html lang="it">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Esempio LocalStorage</title>
	<style>
		html,
		body {
			margin: 0;
			padding: 0;
			width: 100%;
			height: 100%;
			overflow: hidden;
			background: #111;
		}

		#viewport {
			width: 100vw;
			height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
			display: none;
		}

		#app {
			width: 1920px;
			height: 1080px;
			transform-origin: top left;
		}



		.cell {
			border: 1px solid rgba(0, 0, 0, 0.2);
		}

		.cell:hover {
			background: rgba(255, 255, 255, 0.4);

		}

		.menu {
			height: 50px;
			padding: 0px;
			padding-top: 15px;
			top: 0px;
			width: 100%;
			
			background: linear-gradient(180deg, #7a4a1f 0%, #5b3414 100%);
			font-size: 1.8rem;
			letter-spacing: 1px;
			text-transform: uppercase;
			color: #fff;
			vertical-align: middle;
			text-align: center;

		}

		.board {
			display: grid;
			grid-template-columns: repeat(9, 100px);
			grid-template-rows: repeat(9, 100px);
			padding: 0px;
		}

		/**************************************/

		#dice-container {
			width: 100%;
			/* cambia qui se vuoi */
			aspect-ratio: 1 / 1;
			/* sempre quadrato */
			max-height: 210px;
			background: #0f1116;

		}

		canvas {
			width: 100%;
			height: 100%;
			display: block;
		}

		/********************************************/
		.modalBG {
			position: absolute;
			padding: 0px;
			margin: 0px;
			top: 0px;
			left: 0px;
			width: 100%;
			height: 100%;
			background: #333;
			z-index: 11;
			opacity: 0.5;
			display: none;

		}


		/***********************/

		.dd-message {
			position: absolute;
			padding: 20px 24px;
			padding: 10px;
			background: linear-gradient(180deg, #f3e5c0 0%, #e6d3a3 100%);
			border: 4px solid #5b3a1a;
			border-radius: 10px;
			box-shadow:
				inset 0 0 0 2px #c9a86a,
				inset 0 0 15px rgba(0, 0, 0, 0.25),
				0 6px 12px rgba(0, 0, 0, 0.35);
			color: #2b1a0f;
			font-family: "Georgia", "Times New Roman", serif;
			top: 300px;
			left: 300px;
			width: 400px;
			height: 300px;
			z-index: 99;
			display: none;

		}
	</style>


	<link rel="stylesheet" href="./CSS/esdiv.css">
</head>

<body>

<div id="splash">
	<button class="dd-btn" onclick="goFull();">Continua...</button>
</div>


	<div id="viewport">
		<div id="app">


	<div id="modal" class="modalBG"></div>
	

			<div class="dd-message" id="msg">
				<div class="dd-title">Messaggio</div>
				<div id="msgBdy">un messaggio</div>
				<button class="dd-btn" onclick="goFull();">Continua...</button>
			</div>






			<div class="menu" id="menu">MyMenu</div>


			<div class="dd-frame" style="top: 100px; left: 25px; width: 400px; height: 400px">
				<div class="dd-title">Scheda Personaggio</div>
				<p>Nome: Elrond</p>
				<p>Classe: myClass</p>
				<p>PV: 12</p>

			</div>

			<div class="dd-frame" style="top: 600px; left: 25px; width: 400px; height: 400px">
				<div class="dd-title">Inventario</div>
				<div class="dd-inventory" id="inv">
					<div class="dd-slot" title="Pozione">
						<span class="icon">üß™</span>
					</div>
					<div class="dd-slot" title="Spada">
						<span class="icon">üó°Ô∏è</span>
					</div>
					<div class="dd-slot empty" title="Vuoto"></div>
					<div class="dd-slot empty" title="Vuoto"></div>
					<div class="dd-slot" title="Monete">
						<span class="icon">ü™ô</span>
					</div>
					<div class="dd-slot empty" title="Vuoto"></div>
					<!-- altra riga -->
					<div class="dd-slot empty" title="Vuoto"></div>
					<div class="dd-slot empty" title="Vuoto"></div>
					<div class="dd-slot empty" title="Vuoto"></div>
					<div class="dd-slot" title="Pergamena">
						<span class="icon">üìú</span>
					</div>
					<div class="dd-slot empty" title="Vuoto"></div>
					<div class="dd-slot empty" title="Vuoto"></div>


					<div class="dd-slot" title="Pergamena">
						<span class="icon">üìú</span>
					</div>
					<div class="dd-slot" title="Pergamena">
						<span class="icon">üìú</span>
					</div>
					<div class="dd-slot" title="Pergamena">
						<span class="icon">üìú</span>
					</div>
				</div>
			</div>


			<div class="dd-frame" style="top: 100px; right: 25px; width: 400px; height: 300px">
				<div class="dd-title">Mappa</div>
				<button class="dd-btn">Incantesimo</button>
				<button class="dd-btn">Attacca</button>
				<button class="dd-btn">Parla</button>
				<button class="dd-btn">Vai a</button>
			</div>


			<div class="dd-frame" style="top: 450px; right: 25px; width: 400px; height: 250px">
				<div class="dd-title">Dado</div>
				<div id="dice-container">
					<canvas id="c"></canvas>
				</div>
			</div>


			<div class="dd-frame" style="top: 750px; right: 25px; width: 400px; height: 250px">
				<div class="dd-title">Azioni</div>
				<button class="dd-btn">Incantesimo</button>
				<button class="dd-btn">Attacca</button>
				<button class="dd-btn">Parla</button>
				<button class="dd-btn">Vai a</button>
			</div>



			<div class="dd-frame board" id="board"
				style="top: 100px; left: 500px; width: 900px; height: 900px; background-image: url('./IMG/strada.png')">
			</div>
		</div>
	</div>


	<script>
		function scaleApp() {
			const app = document.getElementById("app");
			const scaleX = window.innerWidth / 1920;
			const scaleY = window.innerHeight / 1080;
			const scale = Math.min(scaleX, scaleY); // mantiene proporzioni

			app.style.transform = `scale(${scale})`;
		}
		window.addEventListener("resize", scaleApp);
		scaleApp();
	</script>



	<script>
		document.getElementById("inv").addEventListener("click", (e) => {
			const slot = e.target.closest(".dd-slot");
			if (!slot) return;
			document.querySelectorAll(".dd-slot.selected")
				.forEach(s => s.classList.remove("selected"));
			slot.classList.add("selected");
		});
	</script>


	<script>
		function goFull() {
			const el = document.documentElement;
			if (el.requestFullscreen) el.requestFullscreen();
			document.getElementById("viewport").style.display = "block";
			document.getElementById("splash").style.display = "none";
			document.getElementById("msg").style.display = "none";
			document.getElementById("modal").style.display = "none";
			
		}

		/*document.addEventListener("fullscreenchange", () => {
			if (!document.fullscreenElement) {
				//document.getElementById("viewport").style.display = "none";
			}
		});*/

	</script>

	<script>
		const board = document.getElementById("board");
		for (let i = 0; i < 81; i++) {
			const cell = document.createElement("div");
			cell.className = "cell";
			board.appendChild(cell);
		}
	</script>

	<script>
		function showMsg(aMessage) {

			document.getElementById("modal").style.display = "block";
			document.getElementById("msg").style.display = "block";
			document.getElementById("msgBdy").innerHTML = aMessage;

		}
	</script>

	<script src="./JS/persistance.js"></script>
	<script src="./JS/dado.js"></script>

</body>

</html>